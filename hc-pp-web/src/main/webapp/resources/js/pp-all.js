Ext.define("Hc_pp.Application",{extend:"Ext.app.Application",name:"Hc_pp",appFolder:"resources/app",init:function(){var a=this;a.setDefaultToken("blmo");Ext.setGlyphFontFamily("FontAwesome");Ext.QuickTips.init()},launch:function(){}});
Ext.define("Hc_pp.model.BlMo",{extend:"Ext.data.Model",alias:"model.blmo",fields:[{name:"lineId",text:"行ID(主键)",type:"int"},{name:"factoryNo",text:"厂区编号",type:"string"},{name:"brandNo",text:"品牌",type:"string"},{name:"divisionNo",text:"事业部编号",type:"string"},{name:"storeNo",text:"仓库编号",type:"string"},{name:"workshopNo",text:"车间",type:"string"},{name:"groupNo",text:"面部小组",type:"string"},{name:"planer",text:"计划员",type:"string"},{name:"scheduleNo",text:"排程号",type:"string"},{name:"startDate",text:"开工日期",type:"date"},{name:"endDate",text:"完工日期",type:"date"},{name:"materialNo",text:"产品编号",type:"string"},{name:"billNo",text:"单据编号(MO号)",type:"string"},{name:"billTypeNo",text:"单据类型(MO)",type:"string"},{name:"workOrderType",text:"工单类型(CP,ZD,DL,BM物料基础资料自动带出，可调整)",type:"string"},{name:"customerType",text:"客户类型(内销还是外销)",type:"string"},{name:"moMaterialStatus",text:"物料状态(取片语mo_material_status，50确认,51分配,52拣货,500完结)",type:"string"},{name:"moProcessStatus",text:"工序状态(取片语mo_process_status，60确认，61部分汇报，500完结)",type:"string"},{name:"moMoStatus",text:"工单状态(取片语mo_mo_status，40确认,41部分汇报,500完结)",type:"string"},{name:"sizeTypeNo",text:"配码组",type:"string"},{name:"sizeNo",text:"尺码",type:"string"},{name:"sizeQty",text:"尺码数量",type:"int"},{name:"finishQty",text:"制造数(完工数)",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"date"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"date"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_pp.model.BlMoBom",{extend:"Ext.data.Model",alias:"model.blmobom",fields:[{name:"lineId",text:"行ID(主键)",type:"int"},{name:"factoryNo",text:"厂区编号",type:"string"},{name:"divisionNo",text:"事业部编号",type:"string"},{name:"storeNo",text:"仓库编号",type:"string"},{name:"workshopNo",text:"车间",type:"string"},{name:"scheduleNo",text:"排程号",type:"string"},{name:"productNo",text:"产品编号",type:"string"},{name:"billNo",text:"MO号",type:"string"},{name:"seqNo",text:"物料序号",type:"string"},{name:"childSeqNo",text:"物料子序号",type:"string"},{name:"materialPurpose",text:"物料用途",type:"string"},{name:"materialNo",text:"物料编号",type:"string"},{name:"sizeNo",text:"尺码",type:"string"},{name:"unitNo",text:"物料单位编号",type:"string"},{name:"unitQty",text:"单用量",type:"number"},{name:"sumQty",text:"总用量",type:"number"},{name:"assignedQty",text:"已分配量",type:"number"},{name:"issuedQty",text:"已发料量",type:"number"},{name:"unissuedQty",text:"未发料量",type:"number"},{name:"moIssuedStatus",text:"发料状态(取字典mo_issued_status ，50确认,51分配,52拣货,53发料,500完结)",type:"string"},{name:"pickingOrderNo",text:"拣货单号",type:"string"},{name:"issuedStoreNo",text:"发料仓库",type:"string"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"date"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"date"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_pp.model.BlMoTicket",{extend:"Ext.data.Model",alias:"model.blmoticket",fields:[{name:"lineId",text:"行id(主键)",type:"bigint"},{name:"billNo",text:"单据编号(T+yyyyMMdd+6位流水号)",type:"string"},{name:"ticketNo",text:"工票编号(同单据编号)",type:"string"},{name:"ticketType",text:"工票类型(取数据字典 workshop_type)",type:"string"},{name:"workshopNo",text:"工作中心(从bas_workshop取)",type:"string"},{name:"divisionNo",text:"工作中心所在事业部编号",type:"string"},{name:"groupNo",text:"小组编号(从bas_workshop_group取)",type:"string"},{name:"ticketQty",text:"工票数量",type:"smallint"},{name:"boxno",text:"箱号",type:"string"},{name:"isPrint",text:"是否打印(0=未打印 1=已打印)",type:"smallint"},{name:"printer",text:"打印人(最后一次打印人)",type:"string"},{name:"printTime",text:"打印时间(最后一次打印时间)",type:"date"},{name:"isInput",text:"是否录入(0=未录入 1=已录入)",type:"smallint"},{name:"inputStatus",text:"录入状态(数据字典)",type:"tinyint"},{name:"inputer",text:"录入人(最后一次录入人)",type:"string"},{name:"inputTime",text:"录入时间(最后一次录入时间)",type:"date"},{name:"inputAuditor",text:"录入审核人",type:"string"},{name:"inputAuditTime",text:"录入审核时间",type:"date"},{name:"isReport",text:"是否汇报(0=未汇报 1=部分汇报 2=全部汇报)",type:"smallint"},{name:"reporter",text:"汇报人(最后一次汇报人)",type:"string"},{name:"reportTime",text:"汇报时间(最后一次汇报时间)",type:"date"},{name:"whetherSum",text:"是否汇总(0=未汇总,1=汇总 汇总是进行工资运算)",type:"smallint"},{name:"creator",text:"创建者",type:"string"},{name:"createTime",text:"创建时间",type:"date"},{name:"modifier",text:"修改者",type:"string"},{name:"modifyTime",text:"修改时间",type:"date"},{name:"auditor",text:"审核人",type:"string"},{name:"auditTime",text:"审核时间",type:"date"},{name:"billStatus",text:"工票状态(数据字典)",type:"tinyint"},{name:"remarks",text:"备注",type:"string"},],idProperty:"appNo",identifier:"negative"});
Ext.define("Hc_pp.model.BlMoTicketCreate",{extend:"Ext.data.Model",alias:"model.blmoticketcreate",fields:[{name:"lineId",text:"行id(主键)",type:"int"},{name:"boxNo",text:"箱号(yyyyMMdd+6位流水号)",type:"string"},{name:"scheduleNo",text:"排程号",type:"string"},{name:"modelNo",text:"形体",type:"string"},{name:"styleNo",text:"款号",type:"string"},{name:"workGroupCode",text:"作业组",type:"string"},{name:"workshopNo",text:"车间(从bas_workshop取)",type:"string"},{name:"startDate",text:"开工日期",type:"string"},{name:"generation",text:"生成方式",type:"string"},]});
Ext.define("Hc_pp.model.BlMoTicketDtl",{extend:"Ext.data.Model",alias:"model.blmoticketdtl",fields:[{name:"lineId",text:"行id(主键)",type:"bigint"},{name:"divisionNo",text:"工作中心所在事业部编号",type:"string"},{name:"billNo",text:"单据编号(T+yyyyMMdd+6位流水号)",type:"string"},{name:"ticketNo",text:"工票编号(同单据编号)",type:"string"},{name:"orderNo",text:"工序序号(工序工分表里的序号)",type:"smallint"},{name:"workProcessCode",text:"工序编码",type:"string"},{name:"workValue",text:"工分值",type:"decimal"},{name:"isAssist",text:"是否外协(0=否,1=是)",type:"smallint"},{name:"workGroupCode",text:"作业组别(从pd_work_group取数)",type:"string"},],idProperty:"appNo",identifier:"negative"});
Ext.define("Hc_pp.model.BlMoTicketHand",{extend:"Ext.data.Model",alias:"model.blmotickethand",fields:[{name:"lineId",text:"��id(����)",type:"bigint"},{name:"divisionNo",text:"��������������ҵ�����",type:"string"},{name:"billNo",text:"���ݱ��(T+yyyyMMdd+6λ��ˮ��)",type:"string"},{name:"ticketNo",text:"��Ʊ���(ͬ���ݱ��)",type:"string"},{name:"handNo",text:"�ֱ��",type:"string"},],idProperty:"appNo",identifier:"negative"});
Ext.define("Hc_pp.model.BlMoTicketInput",{extend:"Ext.data.Model",alias:"model.blmoticketinput",fields:[{name:"lineId",text:"行id(主键)",type:"bigint"},{name:"divisionNo",text:"工作中心所在事业部编号",type:"string"},{name:"billNo",text:"单据编号(T+yyyyMMdd+6位流水号)",type:"string"},{name:"ticketNo",text:"工票编号(同单据编号)",type:"string"},{name:"orderNo",text:"工序序号(工序工分表里的序号)",type:"smallint"},{name:"workProcessCode",text:"工序编码",type:"string"},{name:"empCode",text:"员工编号",type:"string"},{name:"shortCode",text:"电脑号",type:"string"},{name:"deptId",text:"员工所在部门ID",type:"int"},{name:"inputQty",text:"录入数量",type:"smallint"},{name:"inputTime",text:"录入时间",type:"date"},{name:"whetherSum",text:"是否汇总(0=未汇总,1=汇总.汇总是进行工资运算)",type:"smallint"},],idProperty:"appNo",identifier:"negative"});
Ext.define("Hc_pp.model.BlMop",{extend:"Ext.data.Model",alias:"model.blmop",fields:[{name:"lineId",text:"行id(主键)",type:"int"},{name:"billNo",text:"单据编号(MOP号)",type:"string"},{name:"billTypeNo",text:"单据类型(MOP)",type:"string"},{name:"divisionNo",text:"事业部编号(前端不显示)",type:"string"},{name:"brandNo",text:"品牌编号(取bas_brand)",type:"string"},{name:"coNo",text:"销售订单号",type:"string"},{name:"dataSource",text:"数据来源",type:"string",defaultValue:0},{name:"billStatus",text:"单据状态(取数据字典 bill_status)",type:"string"},{name:"data_source",text:"数据来源",type:"string"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"date"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"date"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_pp.model.BlMopDtl",{extend:"Ext.data.Model",alias:"model.blmopdtl",fields:[{name:"lineId",text:"行ID(主键)",type:"int"},{name:"billNo",text:"单据编号(MOP号)",type:"string"},{name:"factoryNo",text:"厂区编号",type:"string"},{name:"divisionNo",text:"事业部编号",type:"string"},{name:"storeNo",text:"仓库编号",type:"string"},{name:"workshopNo",text:"车间",type:"string"},{name:"planer",text:"计划员",type:"string"},{name:"startDate",text:"计划开工日期",type:"date"},{name:"scheduleNo",text:"排程号",type:"string"},{name:"endDate",text:"计划完工日期(根据开工日期和提前期计算出来)",type:"date"},{name:"coLineNo",text:"销售订单行号",type:"string"},{name:"materialNo",text:"物料编号",type:"string"},{name:"bomPurpose",text:"BOM用途(S2=开发 STD=标准 SUB=委外 SPD=预测)",type:"string"},{name:"workOrderType",text:"工单类型(CP,ZD,DL,BM物料基础资料自动带出，可调整)",type:"string"},{name:"associateNo",text:"委托关联号(发生调单有用)",type:"string"},{name:"mopStatus",text:"计划单(MOP)状态(制单状态10,确认为20)",type:"string"},{name:"customerType",text:"客户类型(内销还是外销)",type:"string"},{name:"groupNo",text:"面部小组",type:"string"},{name:"sizeNo",text:"尺码",type:"string"},{name:"sizeQty",text:"尺码数量",type:"int"},{name:"sizeTypeNo",text:"配码组(根据物料基础信息带出)",type:"string"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_pp.model.BlPickingOrder",{extend:"Ext.data.Model",alias:"model.blpickingorder",fields:[{name:"lineId",text:"行id(主键)",type:"int"},{name:"billNo",text:"拣货单号",type:"string"},{name:"billTypeNo",text:"单据类型(拣货单)",type:"string"},{name:"divisionNo",text:"事业部编号(前端不显示)",type:"string"},{name:"storeNo",text:"仓库编号",type:"string"},{name:"workshopNo",text:"车间",type:"string"},{name:"supplierNo",text:"供应商(考虑后期外协拣货发料，暂不用)",type:"string"},{name:"startDate",text:"开工日期"},{name:"billStatus",text:"单据状态(取数据字典 bill_status)",type:"string"},{name:"creator",text:"创建人",type:"string"},{name:"createTime",text:"创建时间",type:"string"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"string"},{name:"auditor",text:"审核人",type:"string"},{name:"auditTime",text:"审核时间",type:"string"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_pp.model.BlPickingOrderDtl",{extend:"Ext.data.Model",alias:"model.blpickingorderdtl",fields:[{name:"lineId",text:"行id(主键)",type:"int"},{name:"billNo",text:"拣货单号",type:"string"},{name:"orderNo",text:"序号",type:"int"},{name:"divisionNo",text:"事业部编号",type:"string"},{name:"scheduleNo",text:"排程号",type:"string"},{name:"productNo",text:"产品编号",type:"string"},{name:"materialPurpose",text:"物料用途",type:"string"},{name:"materialNo",text:"物料编号",type:"string"},{name:"sizeNo",text:"尺码",type:"string"},{name:"unitNo",text:"单位",type:"string"},{name:"sumQty",text:"定额数量",type:"float"}]});
Ext.define("Hc_pp.model.BlProcessReport",{extend:"Ext.data.Model",alias:"model.blprocessreport",fields:[{name:"lineId",text:"行ID(主键)",type:"int"},{name:"factoryNo",text:"厂区编号",type:"string"},{name:"brandNo",text:"品牌编号(取bas_brand)",type:"string"},{name:"divisionNo",text:"事业部编号",type:"string"},{name:"billNo",text:"单据编号",type:"string"},{name:"billTypeNo",text:"单据类型",type:"string"},{name:"workshopNo",text:"车间",type:"string"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"date"},{name:"auditor",text:"审核人",type:"string"},{name:"auditTime",text:"审核时间",type:"date"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"date"},{name:"remarks",text:"备注",type:"string"},]});
Ext.define("Hc_pp.model.BlProcessReportDtl",{extend:"Ext.data.Model",alias:"model.blprocessreportdtl",fields:[{name:"lineId",text:"行ID(主键)",type:"int"},{name:"billNo",text:"单据编号",type:"string"},{name:"orderNo",text:"序号",type:"int"},{name:"divisionNo",text:"事业部编号",type:"string"},{name:"scheduleNo",text:"排程号",type:"string"},{name:"materialNo",text:"产品编号",type:"string"},{name:"moNo",text:"MO号",type:"string"},{name:"sizeTypeNo",text:"配码组",type:"string"},{name:"sizeNo",text:"尺码",type:"string"},{name:"sizeQty",text:"尺码数量",type:"int"},{name:"reportQty",text:"汇报数",type:"int"},{name:"finishFlag",text:"完结标记",type:"int"},{name:"standWorkPoints",text:"标准工分值",type:"float"},{name:"sumWorkPoints",text:"累计工分值",type:"float"},]});
Ext.define("Hc_pp.model.PpHandSplit",{extend:"Ext.data.Model",alias:"model.pphandsplit",fields:[{name:"hand0",text:"第0手",type:"int"},]});
Ext.define("Hc_pp.model.PpMo",{extend:"Ext.data.Model",alias:"model.ppmo",fields:[{name:"lineId",text:"行ID(主键)",type:"int"},{name:"factoryNo",text:"厂区编号",type:"string"},{name:"brandNo",text:"品牌",type:"string"},{name:"divisionNo",text:"事业部编号",type:"string"},{name:"storeNo",text:"仓库编号",type:"string"},{name:"workshopNo",text:"车间",type:"string"},{name:"groupNo",text:"面部小组",type:"string"},{name:"planer",text:"计划员",type:"string"},{name:"scheduleNo",text:"排程号",type:"string"},{name:"startDate",text:"开工日期",type:"date"},{name:"endDate",text:"完工日期",type:"date"},{name:"materialNo",text:"产品编号",type:"string"},{name:"materialName",text:"产品名称",type:"string"},{name:"normalUnit",text:"基本单位",type:"string"},{name:"billNo",text:"单据编号(MO号)",type:"string"},{name:"billTypeNo",text:"单据类型(MO)",type:"string"},{name:"workOrderType",text:"工单类型(CP,ZD,DL,BM物料基础资料自动带出，可调整)",type:"string"},{name:"customerType",text:"客户类型(内销还是外销)",type:"string"},{name:"moMaterialStatus",text:"物料状态(取片语mo_material_status，50确认,51分配,52拣货,500完结)",type:"string"},{name:"moProcessStatus",text:"工序状态(取片语mo_process_status，60确认，61部分汇报，500完结)",type:"string"},{name:"moMoStatus",text:"工单状态(取片语mo_mo_status，40确认,41部分汇报,500完结)",type:"string"},{name:"sizeTypeNo",text:"配码组",type:"string"},{name:"sizeNo",text:"尺码",type:"string"},{name:"sizeQty",text:"尺码数量",type:"int"},{name:"finishQty",text:"制造数(完工数)",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间",type:"date"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间",type:"date"},{name:"remarks",text:"备注",type:"string"},{name:"wcode",text:"工分表编号",type:"string"}]});
Ext.define("Hc_pp.model.PpMoHand",{extend:"Ext.data.Model",alias:"model.ppmohand",fields:[{name:"lineId",text:"行id(主键)",type:"int"},{name:"handNo",text:"手编号(yyyyMMdd+6位流水号)",type:"string"},{name:"boxNo",text:"箱号(yyyyMMdd+6位流水号)",type:"string"},{name:"startDate",text:"开工日期",type:"date"},{name:"workshopNo",text:"工作中心(从bas_workshop取)",type:"string"},{name:"wrkactType",text:"工作中心类型(取数据字典 workshop_type)",type:"string"},{name:"factoryNo",text:"厂区编号(前端不显示)",type:"string"},{name:"divisionNo",text:"车间所在事业部编号(前端不显示)",type:"string"},{name:"wrkactNo",text:"工分表编号",type:"string"},{name:"materialNo",text:"半成品编码",type:"string"},{name:"materialName",text:"产品名称",type:"string"},{name:"normalUnit",text:"基本单位",type:"string"},{name:"qtyTotal",text:"每手总数量",type:"int"},{name:"scheduleNo",text:"排程号",type:"string"},{name:"moNo",text:"MO号",type:"string"},{name:"moDivisionNo",text:"MO所在事业部编号(前端不显示)",type:"string"},{name:"sizeNo",text:"配码",type:"string"},{name:"qtyMo",text:"MO配码工单数量",type:"int"},{name:"qtyHand",text:"每个配码数量",type:"int"},{name:"remarks",text:"备注",type:"string"},{name:"modtlLineId",text:"表bl_mo_dtl的lineid",type:"int"}]});
Ext.define("Hc_pp.model.PpWorkshopStyle",{extend:"Ext.data.Model",alias:"model.ppworkshopstyle",fields:[{name:"lineId",text:"行ID(主键)",type:"int"},{name:"factoryNo",text:"厂区编号",type:"string"},{name:"divisionNo",text:"事业部编号",type:"string"},{name:"materialNo",text:"物料编号",type:"string"},{name:"workshopNo",text:"车间",type:"string"},{name:"groupNo",text:"小组",type:"string"},{name:"aheadTime",text:"提前期",type:"int"},{name:"enableFlag",text:"数据状态(0=禁用 1=启用)",type:"int"},{name:"modifier",text:"最后修改人",type:"string"},{name:"modifyTime",text:"最后修改时间",type:"string"},{name:"remarks",text:"备注",type:"string"}]});
Ext.define("Hc_pp.store.BlTemplate",{extend:"Ext.data.Store",alias:"store.bltemplate",storeId:"bltemplate",model:"Hc_pp.model.BlTemplate"});
Ext.define("Hc_pp.view.blmo.BlMo",{extend:"Hc_Common.view.BaseBillListPage",alias:"widget.blmo",controller:"blmo",viewModel:{type:"blmo"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{fieldLabel:"工单状态",name:"moMoStatus",xtype:"extcombox",displayvalue:"40=确认:41=部分汇报:500=完结"},{xtype:"textfield",name:"billNo",fieldLabel:"工单号"},{fieldLabel:"事业部",name:"divisionNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_division/listAll.json",displaymember:"divisionName",valuemember:"divisionNo"},{fieldLabel:"品牌",name:"brandNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandCname",valuemember:"brandNo"},{fieldLabel:"厂区",name:"factoryNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_factory/listAll.json",displaymember:"factoryName",valuemember:"factoryNo"},{fieldLabel:"车间",name:"workshopNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_workshop/listAll.json",displaymember:"workshopName",valuemember:"workshopNo"},{fieldLabel:"面部小组",name:"groupNo",xtype:"extcombox",displayvalue:"面部小组编号"},{xtype:"textfield",name:"materialNo",fieldLabel:"产品编码"},{xtype:"datefield",fieldLabel:"开工日期",name:"orderDateStrat"},{xtype:"datefield",fieldLabel:"到",name:"startDate",vtype:"compareTo",compareTo:"orderDateStrat",compareType:">=",compareError:"结束日期不能小于开始日期"},{xtype:"datefield",fieldLabel:"完工日期",name:"orderDateStrat"},{xtype:"datefield",fieldLabel:"到",name:"endDate",vtype:"compareTo",compareTo:"orderDateStrat",compareType:">=",compareError:"结束日期不能小于开始日期"}],gridColumns:[{dataIndex:"lineId",text:"行ID(主键)",hidden:true,editor:{allowBlank:true}},{dataIndex:"moMoStatus",text:"工单状态",editor:{allowBlank:true}},{dataIndex:"billNo",text:"工单号",editor:{allowBlank:true}},{dataIndex:"factoryNo",text:"厂区",editor:{allowBlank:true}},{dataIndex:"divisionNo",text:"事业部",editor:{allowBlank:true}},{dataIndex:"brandNo",text:"品牌",editor:{allowBlank:true}},{dataIndex:"storeNo",text:"仓库",editor:{allowBlank:true}},{dataIndex:"workshopNo",text:"车间",editor:{allowBlank:true}},{dataIndex:"groupNo",text:"面部小组",editor:{allowBlank:true}},{dataIndex:"planer",text:"计划员",editor:{allowBlank:true}},{dataIndex:"scheduleNo",text:"排程号",editor:{allowBlank:true}},{dataIndex:"startDate",text:"开工日期",editor:{allowBlank:true}},{dataIndex:"endDate",text:"完工日期",editor:{allowBlank:true}},{dataIndex:"materialNo",text:"产品编码",editor:{allowBlank:true}},{dataIndex:"workOrderType",text:"工单类型",editor:{allowBlank:true}},{dataIndex:"customerType",text:"客户类型",editor:{allowBlank:true}},{dataIndex:"moMaterialStatus",text:"物料状态",editor:{allowBlank:true}},{dataIndex:"moProcessStatus",text:"工序状态",editor:{allowBlank:true}},{dataIndex:"sizeTypeNo",text:"配码组",editor:{allowBlank:true}},{dataIndex:"sizeNo",text:"尺码",editor:{allowBlank:true}},{dataIndex:"sizeQty",text:"工单数量",editor:{allowBlank:true}},{dataIndex:"finishQty",text:"完工数",editor:{allowBlank:true}},{dataIndex:"remarks",text:"备注",editor:{allowBlank:true}},{dataIndex:"creator",text:"建档人",editor:{allowBlank:true}},{dataIndex:"createTime",text:"建档时间",editor:{allowBlank:true}},{dataIndex:"modifier",text:"修改人",editor:{allowBlank:true}},{dataIndex:"modifyTime",text:"修改时间",editor:{allowBlank:true}}],gridModel:"Hc_pp.model.BlMo",gridLoadUrl:Hc.ppsPath+"bl_mo/list.json",dtlName:"blmobom",showModel:"selftab"});a.callParent()}});
Ext.define("Hc_pp.view.blmo.BlMoBom",{extend:"Hc_Common.view.BaseBillDetailPage",alias:"widget.blmobom",controller:"blmobom",viewModel:{type:"blmobom"},initComponent:function(){var a=this;Ext.apply(a,{billItems:[{name:"moMoStatus",fieldLabel:"工单状态",xtype:"extcombox",bind:{value:"{billRow.moMoStatus}"},displayvalue:"40=确认:41=部分汇报:500=完结"},{name:"billNo",fieldLabel:"工单号",xtype:"textfield",bind:{value:"{billRow.billNo}"}},{name:"factoryNo",fieldLabel:"厂区",xtype:"extcombox",bind:{value:"{billRow.factoryNo}"},displayvalue:Hc.mdmPath+"bas_factory/listAll.json",displaymember:"factoryName",valuemember:"factoryNo"},{fieldLabel:"事业部",name:"divisionNo",xtype:"extcombox",bind:{value:"{billRow.divisionNo}"},displayvalue:Hc.mdmPath+"bas_division/listAll.json",displaymember:"divisionName",valuemember:"divisionNo"},{name:"brandNo",fieldLabel:"品牌",xtype:"extcombox",bind:{value:"{billRow.brandNo}"},displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandCname",valuemember:"brandNo"},{name:"storeNo",fieldLabel:"仓库",xtype:"extcombox",bind:{value:"{billRow.storeNo}"},displayvalue:Hc.mdmPath+"bas_store/listAll.json",displaymember:"storeName",valuemember:"storeNo"},{name:"workshopNo",fieldLabel:"车间",xtype:"extcombox",bind:{value:"{billRow.workshopNo}"},displayvalue:Hc.mdmPath+"bas_workshop/listAll.json",displaymember:"workshopName",valuemember:"workshopNo"},{name:"groupNo",fieldLabel:"面部小组",xtype:"extcombox",bind:{value:"{billRow.groupNo}"},displayvalue:"百丽面部小组"},{name:"planer",fieldLabel:"计划员",xtype:"textfield",bind:{value:"{billRow.planer}"}},{name:"scheduleNo",fieldLabel:"排程号",xtype:"textfield",bind:{value:"{billRow.scheduleNo}"}},{name:"startDate",fieldLabel:"开工日期",xtype:"datefield",bind:{value:"{billRow.startDate}"}},{name:"endDate",fieldLabel:"完工日期",xtype:"datefield",bind:{value:"{billRow.endDate}"}},{name:"materialNo",fieldLabel:"产品编码",xtype:"textfield",bind:{value:"{billRow.materialNo}"}},{name:"workOrderType",fieldLabel:"工单类型",xtype:"textfield",bind:{value:"{billRow.workOrderType}"}},{name:"customerType",fieldLabel:"客户类型",xtype:"textfield",bind:{value:"{billRow.customerType}"}},{name:"sizeTypeNo",fieldLabel:"配码组",xtype:"textfield",bind:{value:"{billRow.sizeTypeNo}"}},{name:"sizeNo",fieldLabel:"尺码",xtype:"textfield",bind:{value:"{billRow.sizeNo}"}},{name:"sizeQty",fieldLabel:"工单数量",xtype:"textfield",bind:{value:"{billRow.sizeQty}"}},{name:"finishQty",fieldLabel:"完工数",xtype:"textfield",bind:{value:"{billRow.finishQty}"}},{name:"remarks",fieldLabel:"备注",xtype:"textfield",bind:{value:"{billRow.remarks}"}}],billLoadUrl:Hc.ppsPath+"bl_mo_bom/list.json",billSaveUrl:Hc.ppsPath+"bl_mo_bom/saveSizeHorizontalData.json",billAuditUrl:Hc.ppsPath+"bl_mo_bom/audit.json",billExportUrl:Hc.ppsPath+"bl_mo_bom/do_export.json",billModel:"Hc_pp.model.BlMoBom",billSubGrid:["mastergrid"],hasStatus2:true,gridColumns:[{dataIndex:"lineId",text:"行ID(主键)",hidden:true,editor:{allowBlank:false}},{dataIndex:"billNo",text:"工单号",hidden:true,editor:{allowBlank:false}},{dataIndex:"productNo",text:"产品编码",hidden:true,editor:{allowBlank:true}},{dataIndex:"seqNo",text:"序号"},{dataIndex:"childSeqNo",text:"子序号"},{dataIndex:"materialPurpose",text:"物料用途",editor:{allowBlank:false}},{dataIndex:"materialNo",text:"物料编码",editor:{allowBlank:true}},{dataIndex:"",text:"物料名称",editor:{allowBlank:true}},{dataIndex:"sizeNo",text:"尺码",editor:{allowBlank:true}},{dataIndex:"unitNo",text:"单位",editor:{allowBlank:false}},{dataIndex:"unitQty",text:"单用量",editor:{allowBlank:false}},{dataIndex:"sumQty",text:"总用量"},{dataIndex:"assignedQty",text:"已分配量"},{dataIndex:"issuedQty",text:"已发料量"},{dataIndex:"unissuedQty",text:"未发料量"},{dataIndex:"moIssuedStatus",text:"发料状态"},{dataIndex:"pickingOrderNo",text:"拣货单号"},{dataIndex:"issuedStoreNo",text:"发料仓库",editor:{allowBlank:false}},{dataIndex:"remarks",text:"备注",editor:{allowBlank:false}},{dataIndex:"creator",text:"建档人",editor:{allowBlank:false}},{dataIndex:"createTime",text:"建档时间",editor:{allowBlank:false}},{dataIndex:"modifier",text:"修改人",editor:{allowBlank:false}},{dataIndex:"modifyTime",text:"修改时间",editor:{allowBlank:false}}],gridPrimaryKey:"lineId",gridModel:"Hc_pp.model.BlMoBom",gridLoadUrl:Hc.ppsPath+"bl_mo_bom/list.json",gridMSizeIdx:5});a.callParent()}});
Ext.define("Hc_pp.view.blmo.BlMoBomController",{extend:"Hc_Common.view.BaseBillDetailPageController",alias:"controller.blmobom"});
Ext.define("Hc_pp.view.blmo.BlMoBomModel",{extend:"Hc_Common.view.BaseBillDetailPageModel",alias:"viewmodel.blmobom"});
Ext.define("Hc_pp.view.blmo.BlMoController",{extend:"Hc_Common.view.BaseBillListPageController",alias:"controller.blmo"});
Ext.define("Hc_pp.view.blmo.BlMoModel",{extend:"Hc_Common.view.BaseBillListPageModel",alias:"viewmodel.blmo"});
Ext.define("Hc_pp.view.blmop.BlMop",{extend:"Hc_Common.view.BaseBillListPage",alias:"widget.blmop",controller:"blmop",viewModel:{type:"blmop"},initComponent:function(){var a=this,d=Ext.create("Hc_Common.store.CmnBrandRelation"),c=Ext.create("Hc_Common.store.CmnDict",{proxy:{url:Hc.mdmPath+"bas_dict/listAll.json?dictCode=bill_type"}}),b=Ext.create("Hc_Common.store.CmnDivision");Ext.apply(a,{searchItems:[{xtype:"extcombox",fieldLabel:"品牌",displaymember:"brandCname",valuemember:"brandNo",store:d},{xtype:"textfield",fieldLabel:"销售订单号",name:"coNo"},{fieldLabel:"单据来源",name:"mopSource",xtype:"extcombox",displayvalue:"0=手工新增:1=MRP"}],gridColumns:[{dataIndex:"brandNo",text:"品牌",xtype:"bllookupedit",displaymember:"brandCname",valuemember:"brandNo",gstore:d,readOnly:true,width:140},{dataIndex:"divisionNo",text:"事业部",xtype:"bllookupedit",displaymember:"divisionName",valuemember:"divisionNo",gstore:b,readOnly:true,width:140},{dataIndex:"coNo",text:"销售订单号",width:155},{dataIndex:"mopSource",text:"单据来源",xtype:"bllookupedit",displayvalue:"0=手工新增:1=MRP",readOnly:true}],gridModel:"Hc_pp.model.BlMop",gridLoadUrl:Hc.ppsPath+"bl_mop/list.json",dtlName:"blmopdtl",showModel:"selftab"});a.callParent()}});
Ext.define("Hc_pp.view.blmop.BlMopController",{extend:"Hc_Common.view.BaseBillListPageController",alias:"controller.blmop"});
Ext.define("Hc_pp.view.blmop.BlMopDtl",{extend:"Hc_Common.view.BaseBillDetailPage",alias:"widget.blmopdtl",controller:"blmopdtl",viewModel:{type:"blmopdtl"},initComponent:function(){var a=this;Ext.apply(a,{billItems:[{fieldLabel:"品牌编号",name:"brandNo",bind:{value:"{billRow.brandNo}"},xtype:"searchhelpfield",allowBlank:false,winTitle:"选择品牌",gridColumns:[{dataIndex:"brandNo",text:"品牌编号",flex:0.5},{dataIndex:"brandCname",text:"品牌名称   ",flex:0.5},{dataIndex:"divisionNo",text:"事业部编号",flex:0.5},{dataIndex:"divisionName",text:"事业部名称",flex:0.5}],searchItems:[{name:"brandNo",fieldLabel:"品牌编号"},{name:"brandCname",fieldLabel:"品牌名称"}],otherFields:"brandCname,divisionNo,divisionName",url:Hc.mdmPath+"bas_brand_relation/listvo.json?selectVoName=SelectListByVoBasBrandRelation"},{fieldLabel:"品牌名称",name:"brandCname",xtype:"textfield",readOnly:true,editable:false},{fieldLabel:"事业部编码",name:"divisionNo",xtype:"textfield",hidden:true},{fieldLabel:"事业部",name:"divisionName",xtype:"textfield"},{xtype:"textfield",fieldLabel:"销售订单号",name:"coNo",bind:{value:"{billRow.coNo}"}},{fieldLabel:"单据来源",name:"mopSource",xtype:"extcombox",bind:{value:"{billRow.mopSource}"},displayvalue:"0=手工新增:1=MRP",width:"100%"}],billLoadUrl:Hc.ppsPath+"bl_mop/list.json",billSaveUrl:Hc.ppsPath+"bl_mop/saveSizeHorizontalData.json",billAuditUrl:Hc.ppsPath+"bl_mop/audit.json",billExportUrl:Hc.ppsPath+"bl_mop/do_export.json",billModel:"Hc_pp.model.BlMop",billSubGrid:["mastergrid"],hasStatus2:true,billType:"bl-mop",gridColumns:[{dataIndex:"lineId",text:"序号"},{dataIndex:"materialNo",text:"物料编码",editor:{allowBlank:false,xtype:"searchhelpfield",name:"materialNo",reference:"materialNo",gridColumns:[{dataIndex:"materialNo",text:"物料编码",flex:0.5},{dataIndex:"materialName",text:"物料名称",flex:0.5}],searchItems:[{name:"materialNo",fieldLabel:"物料编码"},{name:"materialName",fieldLabel:"物料名称"}],isAutoLoad:false,url:Hc.mdmPath+"bas_material/list.json",allowBlank:false}},{dataIndex:"startDate",text:"计划开工日期",editor:{allowBlank:false}},{dataIndex:"endDate",text:"计划完工日期"},{dataIndex:"planer",text:"计划员",editor:{allowBlank:true}},{dataIndex:"scheduleNo",text:"排程号",editor:{allowBlank:true}},{dataIndex:"groupNo",text:"面部小组",editor:{allowBlank:true}},{dataIndex:"bomPurpose",text:"BOM用途"},{dataIndex:"sizeTypeNo",text:"配码组"},{dataIndex:"sizeNo",text:"尺码"},{dataIndex:"sizeQty",text:"尺码数量",editor:{allowBlank:false}},{dataIndex:"remarks",text:"备注",editor:{allowBlank:true}},{dataIndex:"workshopNo",text:"车间"},{dataIndex:"coLineNo",text:"销售订单行号"},{dataIndex:"factoryNo",text:"厂区编号"}],gridPrimaryKey:"lineId",gridModel:"Hc_pp.model.BlMopDtl",gridLoadUrl:Hc.ppsPath+"bl_mop_dtl/listvo.json",gridMSizeIdx:5});a.callParent()}});
Ext.define("Hc_pp.view.blmop.BlMopDtlController",{extend:"Hc_Common.view.BaseBillDetailPageController",alias:"controller.blmopdtl"});
Ext.define("Hc_pp.view.blmop.BlMopDtlModel",{extend:"Hc_Common.view.BaseBillDetailPageModel",alias:"viewmodel.blmopdtl"});
Ext.define("Hc_pp.view.blmop.BlMopModel",{extend:"Hc_Common.view.BaseBillDetailPageModel",alias:"viewmodel.blmop"});
Ext.define("Hc_pp.view.blmoticket.BlMoTicket",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.blmoticket",controller:"blmoticket",viewModel:{type:"blmoticket"},initComponent:function(){var a=this;Ext.apply(a.searchPanel,{items:[]});Ext.apply(a.grid,{columns:[{dataIndex:"lineId",text:"行id(主键)",editor:{allowBlank:false}},{dataIndex:"billNo",text:"单据编号(T+yyyyMMdd+6位流水号)",editor:{allowBlank:false}},{dataIndex:"ticketNo",text:"工票编号(同单据编号)",editor:{allowBlank:false}},{dataIndex:"ticketType",text:"工票类型(取数据字典 workshop_type)",editor:{allowBlank:false}},{dataIndex:"workshopNo",text:"工作中心(从bas_workshop取)",editor:{allowBlank:false}},{dataIndex:"divisionNo",text:"工作中心所在事业部编号",editor:{allowBlank:false}},{dataIndex:"groupNo",text:"小组编号(从bas_workshop_group取)",editor:{allowBlank:false}},{dataIndex:"ticketQty",text:"工票数量",editor:{allowBlank:false}},{dataIndex:"boxno",text:"箱号",editor:{allowBlank:false}},{dataIndex:"isPrint",text:"是否打印(0=未打印 1=已打印)",editor:{allowBlank:false}},{dataIndex:"printer",text:"打印人(最后一次打印人)",editor:{allowBlank:false}},{dataIndex:"printTime",text:"打印时间(最后一次打印时间)",editor:{allowBlank:false}},{dataIndex:"isInput",text:"是否录入(0=未录入 1=已录入)",editor:{allowBlank:false}},{dataIndex:"inputStatus",text:"录入状态(数据字典)",editor:{allowBlank:false}},{dataIndex:"inputer",text:"录入人(最后一次录入人)",editor:{allowBlank:false}},{dataIndex:"inputTime",text:"录入时间(最后一次录入时间)",editor:{allowBlank:false}},{dataIndex:"inputAuditor",text:"录入审核人",editor:{allowBlank:false}},{dataIndex:"inputAuditTime",text:"录入审核时间",editor:{allowBlank:false}},{dataIndex:"isReport",text:"是否汇报(0=未汇报 1=部分汇报 2=全部汇报)",editor:{allowBlank:false}},{dataIndex:"reporter",text:"汇报人(最后一次汇报人)",editor:{allowBlank:false}},{dataIndex:"reportTime",text:"汇报时间(最后一次汇报时间)",editor:{allowBlank:false}},{dataIndex:"whetherSum",text:"是否汇总(0=未汇总,1=汇总 汇总是进行工资运算)",editor:{allowBlank:false}},{dataIndex:"creator",text:"创建者",editor:{allowBlank:false}},{dataIndex:"createTime",text:"创建时间",editor:{allowBlank:false}},{dataIndex:"modifier",text:"修改者",editor:{allowBlank:false}},{dataIndex:"modifyTime",text:"修改时间",editor:{allowBlank:false}},{dataIndex:"auditor",text:"审核人",editor:{allowBlank:false}},{dataIndex:"auditTime",text:"审核时间",editor:{allowBlank:false}},{dataIndex:"billStatus",text:"工票状态(数据字典)",editor:{allowBlank:false}},{dataIndex:"remarks",text:"备注",editor:{allowBlank:false}},],batchUrl:Hc.ppsPath+"rest/bl_mo_ticket/listsave.json"});a.callParent()}});
Ext.define("Hc_pp.view.blmoticket.BlMoTicketController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.blmoticket"});
Ext.define("Hc_pp.view.blmoticket.BlMoTicketModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.blmoticket",stores:{commonstore:{model:"Hc_pp.model.BlMoTicket",proxy:{url:Hc.ppsPath+"rest/bl_mo_ticket/list.json"}}}});
Ext.define("Hc_pp.view.blmoticketcreate.BlMoTicketCreate",{extend:"Hc_Common.view.BaseMultiPage",alias:"widget.blmoticketcreate",controller:"blmoticketcreate",viewModel:{type:"blmoticketcreate"},searchItems:[{fieldLabel:"车间",name:"workshopNo",xtype:"searchhelpfield",winTitle:"选择车间",gridColumns:[{dataIndex:"workshopNo",text:"车间编号",flex:0.5},{dataIndex:"workshopName",text:"车间名称",flex:0.5},{dataIndex:"factoryNo",text:"厂区",flex:0.5}],searchItems:[{name:"workshopNo",fieldLabel:"车间编号"},{name:"workshopName",fieldLabel:"车间名称"},{name:"factory_no",fieldLabel:"厂区"}],url:Hc.mdmPath+"bas_workshop/list.json"},{xtype:"datefield",fieldLabel:"开工日期",name:"startDate"},{fieldLabel:"作业组",name:"workGroupCode",xtype:"extcombox",displayvalue:Hc.pdsPath+"pd_work_group/listAll.json",displaymember:"workGroupName",valuemember:"workGroupCode"},{fieldLabel:"生成方式",name:"generation",xtype:"extcombox",displayvalue:"1=按箱生成:2=按手生成"}],gridHasMark:false,gridHasCreator:false,gridHasModifier:false,gridHasAuditor:false,gridColumns:[{dataIndex:"boxNo",text:"箱号",},{dataIndex:"scheduleNo",text:"排程号",},{dataIndex:"modelNo",text:"形体",},{dataIndex:"styleNo",text:"款号",},{dataIndex:"workshopNo",text:"下达小组",}],gridModel:"Hc_pp.model.BlMoTicketCreate",gridSubGrid:["grid1"],gridPrimaryKey:"boxNo",gridLoadUrl:Hc.ppsPath+"v_bl_mo_box/list.json",gridSaveUrl:Hc.ppsPath+"v_bl_mo_box/saveMasterCustomerList.json",gridExportUrl:Hc.ppsPath+"v_bl_mo_box/do_export.json",gridImportUrl:Hc.ppsPath+"v_bl_mo_box/importExcel.json",grid1Columns:[{dataIndex:"boxNo",text:"箱号",},{dataIndex:"handNo",text:"手编号",},{dataIndex:"sizeNo",text:"配码",},{dataIndex:"qtyTotal",text:"每手总数量",},{dataIndex:"materialNo",text:"产品编码"}],grid1HasMark:false,grid1SupGrid:"mastergrid",grid1Model:"Hc_pp.model.PpMoHand",grid1PrimaryKey:"handNo",grid1LoadUrl:Hc.ppsPath+"pp_mo_hand/list.json",grid1ExportUrl:Hc.ppsPath+"pp_mo_hand/do_export.json",grid1ImportUrl:Hc.ppsPath+"pp_mo_hand/importExcel.json",initComponent:function(){var a=this;a.callParent()}});
Ext.define("Hc_pp.view.blmoticketcreate.BlMoTicketCreateController",{extend:"Hc_Common.view.BaseMultiPageController",alias:"controller.blmoticketcreate",init:function(){var b=this,a=b.getObjList();b.callParent();if(!a){return}if(!b.workObject&&a.mastergrid){b.workObject=a.mastergrid}a.btnAdd.hidden=true;a.btnSave.hidden=true;a.btnDelete.hidden=true;a.btnPrint.hidden=true;a.btnOther1.setVisible(true);a.btnOther1.text="生成工票";a.btnOther2.setVisible(true);a.btnOther2.text="工票列表";a.btnOther3.setVisible(true);a.btnOther3.text="工序详情";a.btnOther4.setVisible(true);a.btnOther4.text="批量修改小组"},});
Ext.define("Hc_pp.view.blmoticketcreate.BlMoTicketCreateModel",{extend:"Hc_Common.view.BaseMultiPageModel",alias:"viewmodel.blmoticketcreate"});
Ext.define("Hc_pp.view.blmoticketdtl.BlMoTicketDtl",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.blmoticketdtl",controller:"blmoticketdtl",viewModel:{type:"blmoticketdtl"},initComponent:function(){var a=this;Ext.apply(a.searchPanel,{items:[]});Ext.apply(a.grid,{columns:[{dataIndex:"lineId",text:"行id(主键)",editor:{allowBlank:false}},{dataIndex:"divisionNo",text:"工作中心所在事业部编号",editor:{allowBlank:false}},{dataIndex:"billNo",text:"单据编号(T+yyyyMMdd+6位流水号)",editor:{allowBlank:false}},{dataIndex:"ticketNo",text:"工票编号(同单据编号)",editor:{allowBlank:false}},{dataIndex:"orderNo",text:"工序序号(工序工分表里的序号)",editor:{allowBlank:false}},{dataIndex:"workProcessCode",text:"工序编码",editor:{allowBlank:false}},{dataIndex:"workValue",text:"工分值",editor:{allowBlank:false}},{dataIndex:"isAssist",text:"是否外协(0=否,1=是)",editor:{allowBlank:false}},{dataIndex:"workGroupCode",text:"作业组别(从pd_work_group取数)",editor:{allowBlank:false}},],batchUrl:Hc.ppsPath+"rest/bl_mo_ticket_dtl/listsave.json"});a.callParent()}});
Ext.define("Hc_pp.view.blmoticketdtl.BlMoTicketDtlController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.blmoticketdtl"});
Ext.define("Hc_pp.view.blmotickethand.BlMoTicketHand",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.blmotickethand",controller:"blmotickethand",viewModel:{type:"blmotickethand"},initComponent:function(){var a=this;Ext.apply(a.searchPanel,{items:[]});Ext.apply(a.grid,{columns:[{dataIndex:"lineId",text:"行id(主键)",editor:{allowBlank:false}},{dataIndex:"divisionNo",text:"工作中心所在事业部编号",editor:{allowBlank:false}},{dataIndex:"billNo",text:"单据编号(T+yyyyMMdd+6位流水号)",editor:{allowBlank:false}},{dataIndex:"ticketNo",text:"工票编号(同单据编号)",editor:{allowBlank:false}},{dataIndex:"handNo",text:"手编号",editor:{allowBlank:false}},],batchUrl:Hc.ppsPath+"rest/bl_mo_ticket_hand/listsave.json"});a.callParent()}});
Ext.define("Hc_pp.view.blmotickethand.BlMoTicketHand",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.blmotickethand",controller:"blmotickethand",viewModel:{type:"blmotickethand"},initComponent:function(){var a=this;Ext.apply(a.searchPanel,{items:[]});Ext.apply(a.grid,{columns:[{dataIndex:"lineId",text:"行id(主键)",editor:{allowBlank:false}},{dataIndex:"divisionNo",text:"工作中心所在事业部编号",editor:{allowBlank:false}},{dataIndex:"billNo",text:"单据编号(T+yyyyMMdd+6位流水号)",editor:{allowBlank:false}},{dataIndex:"ticketNo",text:"工票编号(同单据编号)",editor:{allowBlank:false}},{dataIndex:"handNo",text:"手编号",editor:{allowBlank:false}},],batchUrl:Hc.IntegPath+"rest/bl_mo_ticket_hand/listsave.json"});a.callParent()}});
Ext.define("Hc_pp.view.blmotickethand.BlMoTicketHandController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.blmotickethand"});
Ext.define("Hc_pp.view.blmotickethand.BlMoTicketHandModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.blmotickethand",stores:{commonstore:{model:"Hc_pp.model.BlMoTicketHand",proxy:{url:Hc.IntegPath+"rest/bl_mo_ticket_hand/list.json"}}}});
Ext.define("Hc_pp.view.blmoticketinput.BlMoTicketInput",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.blmoticketinput",controller:"blmoticketinput",viewModel:{type:"blmoticketinput"},initComponent:function(){var a=this;Ext.apply(a.searchPanel,{items:[]});Ext.apply(a.grid,{columns:[{dataIndex:"lineId",text:"行id(主键)",editor:{allowBlank:false}},{dataIndex:"divisionNo",text:"工作中心所在事业部编号",editor:{allowBlank:false}},{dataIndex:"billNo",text:"单据编号(T+yyyyMMdd+6位流水号)",editor:{allowBlank:false}},{dataIndex:"ticketNo",text:"工票编号(同单据编号)",editor:{allowBlank:false}},{dataIndex:"orderNo",text:"工序序号(工序工分表里的序号)",editor:{allowBlank:false}},{dataIndex:"workProcessCode",text:"工序编码",editor:{allowBlank:false}},{dataIndex:"empCode",text:"员工编号",editor:{allowBlank:false}},{dataIndex:"shortCode",text:"电脑号",editor:{allowBlank:false}},{dataIndex:"deptId",text:"员工所在部门ID",editor:{allowBlank:false}},{dataIndex:"inputQty",text:"录入数量",editor:{allowBlank:false}},{dataIndex:"inputTime",text:"录入时间",editor:{allowBlank:false}},{dataIndex:"whetherSum",text:"是否汇总(0=未汇总,1=汇总.汇总是进行工资运算)",editor:{allowBlank:false}},],batchUrl:Hc.ppsPath+"rest/bl_mo_ticket_input/listsave.json"});a.callParent()}});
Ext.define("Hc_pp.view.blmoticketinput.BlMoTicketInputController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.blmoticketinput"});
Ext.define("Hc_pp.view.blmoticketinput.BlMoTicketInputModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.blmoticketinput",stores:{commonstore:{model:"Hc_pp.model.BlMoTicketInput",proxy:{url:Hc.ppsPath+"rest/bl_mo_ticket_input/list.json"}}}});
Ext.define("Hc_pp.view.blpickingorder.BlPickingOrder",{extend:"Hc_Common.view.BaseBillListPage",alias:"widget.blpickingorder",controller:"blpickingorder",viewModel:{type:"blpickingorder"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{fieldLabel:"仓库",name:"storeNo",xtype:"searchhelpfield",winTitle:"选择仓库",bind:{value:"{billRow.storeNo}"},gridColumns:[{dataIndex:"storeNo",text:"仓库编号",flex:0.5},{dataIndex:"storeName",text:"仓库名称",flex:0.5}],searchItems:[{name:"storeNo",fieldLabel:"仓库编号"},{name:"storeName",fieldLabel:"仓库名称"}],url:Hc.mdmPath+"bas_store/listAll.json"},{fieldLabel:"车间",name:"workshopNo",xtype:"extcombox",displayvalue:"面部车间=面部车间",value:"面部车间"}],gridColumns:[{dataIndex:"storeNo",text:"仓库编号",editor:{allowBlank:false}},{dataIndex:"workshopNo",text:"车间",editor:{allowBlank:false}},{dataIndex:"startDate",text:"开工日期",editor:{allowBlank:false}},],gridModel:"Hc_pp.model.BlPickingOrder",gridLoadUrl:Hc.ppsPath+"bl_picking_order/list.json",dtlName:"blpickingorderdtl",showModel:"selftab"});a.callParent()}});
Ext.define("Hc_pp.view.blpickingorder.BlPickingOrderController",{extend:"Hc_Common.view.BaseBillListPageController",alias:"controller.blpickingorder"});
Ext.define("Hc_pp.view.blpickingorder.BlPickingOrderDtl",{extend:"Hc_Common.view.BaseBillDetailPage",alias:"widget.blpickingorderdtl",controller:"blpickingorderdtl",viewModel:{type:"blpickingorderdtl"},initComponent:function(){var a=this;Ext.apply(a,{billItems:[{fieldLabel:"仓库",name:"storeNo",xtype:"searchhelpfield",winTitle:"选择仓库",allowBlank:false,bind:{value:"{billRow.storeNo}"},gridColumns:[{dataIndex:"storeNo",text:"仓库编号",flex:0.5},{dataIndex:"storeName",text:"仓库名称",flex:0.5}],searchItems:[{name:"storeNo",fieldLabel:"仓库编号"},{name:"storeName",fieldLabel:"仓库名称"}],url:Hc.mdmPath+"bas_store/listAll.json"},{fieldLabel:"车间",name:"workshopNo",xtype:"extcombox",displayvalue:"面部车间=面部车间",value:"面部车间",allowBlank:false,bind:{value:"{billRow.workshopNo}"}},{fieldLabel:"开工日期",name:"startDate",xtype:"datefield",allowBlank:false,bind:{value:"{billRow.startDate}"}},{name:"remarks",fieldLabel:"备注",xtype:"textfield",colspan:4,allowBlank:true,bind:{value:"{billRow.remarks}"},regex:/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,regexText:"请输入字母、数字、中文",maxLength:60,enforceMaxLength:true}],billLoadUrl:Hc.ppsPath+"bl_picking_order/list.json",billSaveUrl:Hc.ppsPath+"bl_picking_order/saveSizeHorizontalData.json",billAuditUrl:Hc.ppsPath+"bl_picking_order/audit.json",billExportUrl:Hc.ppsPath+"bl_picking_order/do_export.json",billModel:"Hc_pp.model.BlPickingOrder",billSubGrid:["mastergrid"],hasStatus2:false,editStatus:10,billType:"163001",gridColumns:[{dataIndex:"billNo",text:"拣货单号",editor:{allowBlank:false}},{dataIndex:"scheduleNo",text:"排程号",editor:{allowBlank:false}},{dataIndex:"productNo",text:"产品编码",editor:{allowBlank:false}},{dataIndex:"materialPurpose",text:"物料用途",editor:{allowBlank:false}},{dataIndex:"materialNo",text:"物料编码",editor:{allowBlank:false}},{dataIndex:"sizeNo",text:"配码",editor:{allowBlank:false}},{dataIndex:"unitNo",text:"单位",editor:{allowBlank:false}},{dataIndex:"sumQty",text:"定额数量",editor:{allowBlank:false}}],gridPrimaryKey:"lineId",gridModel:"Hc_pp.model.BlPickingOrderDtl",gridLoadUrl:Hc.ppsPath+"bl_picking_order_dtl/list.json"});a.callParent()}});
Ext.define("Hc_pp.view.blpickingorder.BlPickingOrderDtlController",{extend:"Hc_Common.view.BaseBillDetailPageController",alias:"controller.blpickingorderdtl"});
Ext.define("Hc_pp.view.blpickingorder.BlPickingOrderDtlModel",{extend:"Hc_Common.view.BaseBillDetailPageModel",alias:"viewmodel.blpickingorderdtl",});
Ext.define("Hc_pp.view.blpickingorder.BlPickingOrderModel",{extend:"Hc_Common.view.BaseBillListPageModel",alias:"viewmodel.blpickingorder"});
Ext.define("Hc_pp.view.blprocessreport.BlProcessReport",{extend:"Hc_Common.view.BaseBillListPage",alias:"widget.blprocessreport",controller:"blprocessreport",viewModel:{type:"blprocessreport"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{fieldLabel:"厂区",name:"factoryNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_factory/listAll.json",displaymember:"factoryName",valuemember:"factoryNo"},{fieldLabel:"事业部",name:"divisionNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_division/listAll.json",displaymember:"divisionName",valuemember:"divisionNo"},{fieldLabel:"品牌",name:"brandNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandCname",valuemember:"brandNo"},{fieldLabel:"车间",name:"workshopNo",xtype:"extcombox",displayvalue:"面部车间"},{xtype:"textfield",name:"creator",fieldLabel:"汇报人"},{xtype:"datefield",fieldLabel:"汇报时间",name:"createTime"}],gridColumns:[{dataIndex:"lineId",text:"行ID(主键)",hidden:true,editor:{allowBlank:true}},{dataIndex:"factoryNo",text:"厂区编号",editor:{allowBlank:true}},{dataIndex:"divisionNo",text:"事业部编号",editor:{allowBlank:true}},{dataIndex:"brandNo",text:"品牌编号",editor:{allowBlank:true}},{dataIndex:"workshopNo",text:"车间",editor:{allowBlank:true}},{dataIndex:"modifier",text:"修改人",editor:{allowBlank:true}},{dataIndex:"modifyTime",text:"修改时间",editor:{allowBlank:true}}],gridModel:"Hc_pp.model.BlProcessReport",gridLoadUrl:Hc.ppsPath+"bl_process_report/list.json",dtlName:"blprocessreportdtl",showModel:"selftab"});a.callParent()}});
Ext.define("Hc_pp.view.blprocessreport.BlProcessReportController",{extend:"Hc_Common.view.BaseBillListPageController",alias:"controller.blprocessreport"});
Ext.define("Hc_pp.view.blprocessreport.BlProcessReportDtl",{extend:"Hc_Common.view.BaseBillDetailPage",alias:"widget.blprocessreportdtl",controller:"blprocessreportdtl",viewModel:{type:"blprocessreportdtl"},initComponent:function(){var a=this;Ext.apply(a,{billItems:[{name:"brandNo",fieldLabel:"品牌",xtype:"extcombox",bind:{value:"{billRow.brandNo}"},displayvalue:Hc.mdmPath+"bas_brand/listAll.json",displaymember:"brandCname",valuemember:"brandNo"},{fieldLabel:"事业部",name:"divisionNo",xtype:"extcombox",bind:{value:"{billRow.divisionNo}"},displayvalue:Hc.mdmPath+"bas_division/listAll.json",displaymember:"divisionName",valuemember:"divisionNo"},{name:"factoryNo",fieldLabel:"厂区",xtype:"extcombox",bind:{value:"{billRow.brandNo}"},displayvalue:Hc.mdmPath+"bas_factory/listAll.json",displaymember:"factoryName",valuemember:"factoryNo"},{fieldLabel:"车间",name:"workshopNo",xtype:"extcombox",bind:{value:"{billRow.brandNo}"},displayvalue:"面部车间"},{name:"remarks",fieldLabel:"备注",colspan:3,xtype:"textfield",bind:{value:"{billRow.remarks}"}}],billLoadUrl:Hc.ppsPath+"bl_process_report_dtl/list.json",billSaveUrl:Hc.ppsPath+"bl_process_report_dtl/saveSizeHorizontalData.json",billAuditUrl:Hc.ppsPath+"bl_process_report_dtl/audit.json",billExportUrl:Hc.ppsPath+"bl_process_report_dtl/do_export.json",billModel:"Hc_pp.model.BlProcessReportDtl",billSubGrid:["mastergrid"],hasStatus2:true,gridColumns:[{dataIndex:"lineId",text:"行ID(主键)",hidden:true,editor:{allowBlank:false}},{dataIndex:"billNo",text:"单据编号",hidden:true,editor:{allowBlank:false}},{dataIndex:"orderNo",text:"序号",editor:{allowBlank:false}},{dataIndex:"scheduleNo",text:"排程号",editor:{allowBlank:false}},{dataIndex:"materialNo",text:"产品编码",editor:{allowBlank:true}},{dataIndex:"materialCname",text:"产品名称",editor:{allowBlank:false}},{dataIndex:"moNo",text:"工单号",editor:{allowBlank:true}},{dataIndex:"sizeTypeNo",text:"配码组",editor:{allowBlank:false}},{dataIndex:"sizeNo",text:"尺码",editor:{allowBlank:false}},{dataIndex:"sizeQty",text:"尺码数量",editor:{allowBlank:false}},{dataIndex:"reportQty",text:"汇报数",editor:{allowBlank:true}},{dataIndex:"finishFlag",text:"完结标记",editor:{allowBlank:false}},{dataIndex:"standWorkPoints",text:"标准工分值",editor:{allowBlank:false}},{dataIndex:"sumWorkPoints",text:"累计工分值",editor:{allowBlank:false}}],gridPrimaryKey:"lineId",gridModel:"Hc_pp.model.BlProcessReportDtl",gridLoadUrl:Hc.ppsPath+"bl_process_report_dtl/list.json",gridMSizeIdx:5});a.callParent()}});
Ext.define("Hc_pp.view.blprocessreport.BlProcessReportDtlController",{extend:"Hc_Common.view.BaseBillDetailPageController",alias:"controller.blprocessreportdtl"});
Ext.define("Hc_pp.view.blprocessreport.BlProcessReportDtlModel",{extend:"Hc_Common.view.BaseBillDetailPageModel",alias:"viewmodel.blprocessreportdtl"});
Ext.define("Hc_pp.view.blprocessreport.BlProcessReportModel",{extend:"Hc_Common.view.BaseBillListPageModel",alias:"viewmodel.blprocessreport"});
Ext.define("Hc_pp.view.pphandsplit.PpHandSplit",{extend:"Hc_Common.view.BaseMultiPage",alias:"widget.pphandsplit",controller:"pphandsplit",viewModel:{type:"pphandsplit"},isAutoLoad:false,customLayout1:true,selLineIds:"",initComponent:function(){var e=this;Ext.apply(e,{gridModel:"Hc_pp.model.PpMo",gridColumns:[{dataIndex:"lineId",text:"表bl_mop_dtl(lineId)",hidden:true},{dataIndex:"scheduleNo",text:"排程号"},{dataIndex:"billNo",text:"MO号"},{dataIndex:"wcode",text:"工分表编号"},{dataIndex:"materialNo",text:"产品编码"},{dataIndex:"materialName",text:"产品名称"},{dataIndex:"sizeNo",text:"尺码"},{dataIndex:"sizeQty",text:"工单数量"},{dataIndex:"normalUnit",text:"单位"},{dataIndex:"divisionNo",text:"事业部"},{dataIndex:"factoryNo",text:"厂区"}],gridPrimaryKey:"lineid",gridLoadUrl:Hc.ppsPath+"pp_mo/listAll.json",gridSelModel:"SINGLE",gridIsMaster:false,gridSubGrid:[],grid1Model:"Hc_pp.model.PpHandSplit",grid1Columns:[],grid1HasMark:false,grid1SelModel:"SINGLE",});Ext.apply(e.grid,{id:"ppHandSplitGrid",height:200});Ext.apply(e.grid1,{id:"ppHandSplitGrid1"});e.items=[];var c=e.controller.getBodyHeight(0.4);var f={xtype:"panel",name:"handtoppanel",reference:"handtoppanel",region:"north",height:c,layout:{type:"table",columns:2,align:"center"},split:false,border:false,defaults:{labelAlign:"right",labelWidth:80,width:"100%"},items:[{xtype:"textfield",fieldLabel:"生产单号",bind:{value:"{gridRow.billNo}"}},{xtype:"textfield",fieldLabel:"单位",bind:{value:"{gridRow.normalUnit}"}},{xtype:"textfield",fieldLabel:"产品编码",bind:{value:"{gridRow.materialNo}"}},{xtype:"textfield",fieldLabel:"尺码",bind:{value:"{gridRow.sizeNo}"}},{xtype:"textfield",fieldLabel:"产品名称",bind:{value:"{gridRow.materialName}"}},{xtype:"textfield",reference:"txtSizeQty",fieldLabel:"工单数量",bind:{value:"{gridRow.sizeQty}"}},{xtype:"textfield",reference:"txtHandQty",fieldLabel:"每手数量",regex:/^[0-9]*[1-9][0-9]*$/,regexText:"只能输入正整数",listeners:{change:"onHandQtyChange"}},{xtype:"textfield",reference:"txtHandMinQty",fieldLabel:"每手最小数量",regex:/^[0-9]*[1-9][0-9]*$/,regexText:"只能输入正整数",listeners:{change:"onHandMinQtyChange"}},e.grid]};var d={xtype:"panel",region:"center",layout:"border",items:[e.grid1],border:false};var b={xtype:"panel",region:"center",layout:"border",items:[f,d],border:false};e.items.push(b);e.callParent();var a=Ext.create("Hc_Common.store.Base",{fields:[]});e.grid1.store=a}});
Ext.define("Hc_pp.view.pphandsplit.PpHandSplitController",{extend:"Hc_Common.view.BaseMultiPageController",alias:"controller.pphandsplit",init:function(){var c=this,a=c.getObjList();c.callParent(arguments);c.getObj("grid1").down("pagingtoolbar").setVisible(false);var b=a.mastergrid.getStore();delete b.proxy.extraParams.splitLineIds;b.proxy.extraParams.splitLineIds=c.view.selLineIds;b.reload({scope:this,callback:function(f,e,g){if(f.length>0){a.mastergrid.getSelectionModel().select(0)}}});c.view.on("beforedestroy","onBeforeDestroy",c);if(a.handtoppanel){var d=a.handtoppanel.query("textfield,numberfield,datefield,combo");Ext.each(d,function(e){e.on("specialkey",c.keyToSplit,c)})}},onBeforeDestroy:function(){var a=this,c=Ext.getCmp("ppMoGrid"),b=c.getStore();delete b.proxy.extraParams.notSplitLineIds;b.proxy.extraParams.notSplitLineIds=a.getParentGrid1LineIds();b.loadPage(1)},getParentGrid1LineIds:function(){var c=this;parentGrid1=Ext.getCmp("ppMoGrid1");var b=[];var a="(";parentGrid1.getStore().each(function(d){var e=d.get("modtlLineId");if(!Ext.Array.contains(b,e)){b.push(e);a=a+e+","}});a=Ext.util.Format.substr(a,0,a.length-1);a=a+")";return a},keyToSplit:function(d,f){var g=this,b=g.getObjList();if(f.keyCode==f.ENTER){if((!g.lookupReference("txtHandQty").isValid())||(!g.lookupReference("txtHandMinQty").isValid())){return}var k=Ext.getCmp("ppMoGrid1"),c=k.getStore();var j=b.mastergrid.getSelection()[0];var i=b.grid1.getStore();var h=b.grid1.getColumnManager().columns;i.each(function(e){Ext.Array.each(h,function(m){var n=e.get(m.dataIndex);var l=g.getNewRowForParentGrid1(c,j,n);c.add(l)})});g.lookupReference("txtHandQty").setValue("");g.lookupReference("txtHandMinQty").setValue("");var a=b.mastergrid;if(!a.getSelectionModel().selectNext()){Ext.getCmp("pphandsplit").close()}}},getNewRowForParentGrid1:function(d,a,e){var c=d.getModel();var b=c.create({_flag:"A"});b.set("modtlLineId",a.get("lineId"));b.set("normalUnit",a.get("normalUnit"));b.set("scheduleNo",a.get("scheduleNo"));b.set("wrkactNo",a.get("wcode"));b.set("sizeNo",a.get("sizeNo"));b.set("qtyMo",a.get("sizeQty"));b.set("qtyHand",e);b.set("materialNo",a.get("materialNo"));b.set("materialName",a.get("materialName"));return b},onHandQtyChange:function(f,e,b){var d=this;var a=10;var c=parseInt(f.getValue());if(c<a){a=c}d.lookupReference("txtHandMinQty").setValue("");d.lookupReference("txtHandMinQty").setValue(a)},onHandMinQtyChange:function(d,c,a){var b=this;b.onSplitHand(d)},onSplitHand:function(j){var g=this,a=g.getObjList(),h=a.grid1.getStore(),b=g.view.grid1Columns,n=h.model;if(j.getValue()==""){return}var k=0;var e=parseInt(g.lookupReference("txtSizeQty").getValue());var f=parseInt(g.lookupReference("txtHandQty").getValue());var m=parseInt(j.getValue());if(m>f){Hc.alert("每手最小数量不得大于每手数量");j.setValue((f<10?f:10));return}if(f>e){Hc.alert("每手数量不得大于工单数量");g.lookupReference("txtHandQty").setValue(e);return}if(m==0){j.setValue("");h.remove(h.getAt(0));return}if(f!=0){if(e%f<m){k=parseInt(e/f)}else{k=parseInt(e/f)+1}}var d={};d._flag="A";b=[];if(h.count()>0){h.remove(h.getAt(0))}var l=e;for(var c=1;c<k+1;c++){b.push({text:"第"+c+"手",dataIndex:"hand"+c,name:"hand"+c});if(l>=f+m){d["hand"+c]=f;l=l-f}else{d["hand"+c]=l}}a.grid1.reconfigure(h,b);h.insert(0,new n(d))}});
Ext.define("Hc_pp.view.pphandsplit.PpHandSplitModel",{extend:"Hc_Common.view.BaseMultiPageModel",alias:"viewmodel.pphandsplit"});
Ext.define("Hc_pp.view.ppmo.PpMo",{extend:"Hc_Common.view.BaseMultiPage",alias:"widget.ppmo",controller:"ppmo",viewModel:{type:"ppmo"},isAutoLoad:false,customLayout1:true,choosetoolbar:{xtype:"toolbar",reference:"choosetoolbar",region:"north",items:[{text:"拆分",itemId:"btnOther1",reference:"btnOther1",handler:"onShowSplitDialog",canUse:true,disabled:false},{text:"自动拆手",itemId:"btnOther2",reference:"btnOther2",handler:"onShowAutoSplitDialog",canUse:true,disabled:false},{text:"迁进",itemId:"btnOther3",reference:"btnOther3",handler:"onMoveIn",glyph:Hc.Icon.btnAdd,canUse:true,disabled:false},{text:"迁出",itemId:"btnOther4",reference:"btnOther4",handler:"onMoveOut",glyph:Hc.Icon.btnDelete,canUse:true,disabled:false}]},initComponent:function(){var e=this;Ext.apply(e,{searchItems:[{fieldLabel:"工单类型",name:"wrkactType",xtype:"extcombox",displayvalue:"CP=成品:BM=帮面"},{fieldLabel:"车间",name:"workshopNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_workshop/listAll.json",displaymember:"workshopName",valuemember:"workshopNo"},{xtype:"datefield",fieldLabel:"开工日期",name:"orderDateStrat"},{xtype:"datefield",fieldLabel:"到",name:"startDate",vtype:"compareTo",compareTo:"orderDateStrat",compareType:">=",compareError:"结束日期不能小于开始日期"},{xtype:"textfield",name:"scheduleNo",fieldLabel:"排程号"}],gridColumns:[{dataIndex:"lineId",text:"表bl_mop_dtl(lineId)",hidden:true},{dataIndex:"scheduleNo",text:"排程号"},{dataIndex:"billNo",text:"MO号"},{dataIndex:"wcode",text:"工分表编号"},{dataIndex:"materialNo",text:"产品编码"},{dataIndex:"materialName",text:"产品名称"},{dataIndex:"sizeNo",text:"尺码"},{dataIndex:"sizeQty",text:"工单数量"},{dataIndex:"normalUnit",text:"单位"},{dataIndex:"divisionNo",text:"事业部"},{dataIndex:"factoryNo",text:"厂区"}],gridPrimaryKey:"lineId",gridModel:"Hc_pp.model.PpMo",gridLoadUrl:Hc.ppsPath+"pp_mo/listAll.json",gridHasMark:false,gridHasCreator:false,gridHasModifier:false,gridHasAuditor:false,gridHasOrderNo:true,gridSelModel:"checkboxmodel",gridIsMaster:false,gridSubGrid:[],grid1Columns:[{dataIndex:"handNo",text:"手编号"},{dataIndex:"scheduleNo",text:"排程号"},{dataIndex:"wrkactNo",text:"工分表编号"},{dataIndex:"materialNo",text:"产品编码"},{dataIndex:"materialName",text:"产品名称"},{dataIndex:"sizeNo",text:"配码"},{dataIndex:"qtyMo",text:"工单数量"},{dataIndex:"qtyHand",text:"手数量"},{dataIndex:"normalUnit",text:"单位"},{dataIndex:"modtlLineId",text:"表bl_mo_dtl的lineid",hidden:true}],grid1PrimaryKey:"lineId",grid1Model:"Hc_pp.model.PpMoHand",grid1LoadUrl:Hc.ppsPath+"pp_mo_hand/listAll.json",grid1SaveUrl:Hc.pdsPath+"pp_mo_hand/batchOperate.json",grid1HasMark:false,grid1HasCreator:false,grid1HasModifier:false,grid1HasAuditor:false,grid1HasOrderNo:true});Ext.apply(e.grid,{id:"ppMoGrid"});Ext.apply(e.grid1,{id:"ppMoGrid1"});e.items=[e.toolbar];if(e.searchItems.length>0){e.items.push(e.searchPanel)}var d=e.controller.getBodyHeight(0.4);var c={xtype:"panel",height:d,region:"north",layout:"border",items:[e.grid],split:true,border:false};d=e.controller.getBodyHeight(0.04);var a={xtype:"panel",height:d,region:"north",layout:"border",items:[e.choosetoolbar],border:false};var i={xtype:"panel",region:"center",layout:"border",items:[e.grid1],border:false};var f={xtype:"panel",region:"center",layout:"border",items:[a,i],border:false};var g={xtype:"panel",region:"center",layout:"border",items:[c,f],border:false};var b={xtype:"panel",region:"center",layout:"border",items:[g],border:false};e.items.push(b);e.callParent()}});
Ext.define("Hc_pp.view.ppmo.PpMoController",{extend:"Hc_Common.view.BaseMultiPageController",alias:"controller.ppmo",init:function(){var b=this,a=b.getObjList();b.callParent(arguments);b.getObj("mastergrid").down("pagingtoolbar").setVisible(false);b.getObj("grid1").down("pagingtoolbar").setVisible(false)},onBtnSearchClick:function(e){var g=this,d=g.getObjList(),c=d.mastergrid.getStore(),b=d.grid1.getStore(),a=g.getObj("commonsearch");if(a){var f=a.getValues();for(var h in f){if(f[h]!==""){c.proxy.extraParams[h]=f[h];b.proxy.extraParams[h]=f[h]}else{delete c.proxy.extraParams[h];delete b.proxy.extraParams[h]}}}delete c.proxy.extraParams.notSplitLineIds;delete c.proxy.extraParams.splitLineIds;if(g.beforeSearch(c)===false){return}if(g.beforeSearch(b)===false){return}c.currentPage=1;c.loadPage(1);b.currentPage=1;b.loadPage(1)},onBtnDeleteClick:function(b){var c=this;var a=c.getObjList();c.workObject=a.grid1;c.callParent(arguments)},onMoveIn:function(b){var g=this,h=g.getObjList();var a=h.mastergrid.store;var e=h.grid1.store;searchPanel=g.getObj("commonsearch");if(searchPanel){var k=searchPanel.getValues();for(var j in k){if(k[j]!==""){a.proxy.extraParams[j]=k[j];e.proxy.extraParams[j]=k[j]}else{delete a.proxy.extraParams[j];delete e.proxy.extraParams[j]}}}delete a.proxy.extraParams.notSplitLineIds;a.proxy.extraParams.notSplitLineIds=g.getGridSelectSplitLineIds();a.loadPage(1);var d=h.mastergrid.getSelectionModel().getSelection();var f=e.count();for(var c=0;c<d.length;c++){e.add(g.getNewRowForGrid1(e,d[c]))}g.workObject.getSelectionModel().select(f);f=f+1},onMoveOut:function(e){var f=this,c=f.getObjList();var a=c.mastergrid.store;var d=c.grid1.store;var b=c.grid1.getSelection();f.onBtnDeleteClick();delete a.proxy.extraParams.notSplitLineIds;a.proxy.extraParams.notSplitLineIds=f.getGrid1LineIds();a.loadPage(1)},getNewRowForGrid1:function(d,a){var c=d.getModel();var b=c.create({_flag:"A"});b.set("modtlLineId",a.get("lineId"));b.set("normalUnit",a.get("normalUnit"));b.set("scheduleNo",a.get("scheduleNo"));b.set("wrkactNo",a.get("wcode"));b.set("sizeNo",a.get("sizeNo"));b.set("qtyMo",a.get("sizeQty"));b.set("qtyHand",a.get("sizeQty"));b.set("materialNo",a.get("materialNo"));b.set("materialName",a.get("materialName"));return b},onShowSplitDialog:function(b){var c=this,a=c.getGridSelectSplitLineIds();if(a===""){Hc.alert("请选择需拆分行");return}var d={xtype:"pphandsplit",userRight:c.view.userRight,moduleRight:c.view.moduleRight,userCode:c.view.userCode,userName:c.view.userName,selLineIds:a};d.width=Ext.getBody().getWidth()*0.6;d.height=Ext.getBody().getHeight()*0.6;c.showInWin(d,{id:"pphandsplit",winName:"pphandsplit",title:"拆分",showBbar:true})},onShowAutoSplitDialog:function(a){},getGridSelectSplitLineIds:function(){var d=this;var c=d.getObjList();var b="(";var a=c.mastergrid.getSelectionModel().getSelection();if(a.length==0){return""}Ext.Array.each(a,function(e){b=b+e.get("lineId")+","});b=Ext.util.Format.substr(b,0,b.length-1);b=b+")";return b},getGrid1LineIds:function(){var d=this;var c=d.getObjList();var b=[];var a="(";c.grid1.getStore().each(function(e){var f=e.get("modtlLineId");if(!Ext.Array.contains(b,f)){b.push(f);a=a+f+","}});a=Ext.util.Format.substr(a,0,a.length-1);a=a+")";return a},onWinConfirmClick:function(c){var d=this;var b=d.getObjList();var a=Ext.getCmp("ppHandSplitGrid");if(!a.getSelectionModel().selectNext()){c.up("window").close()}}});
Ext.define("Hc_pp.view.ppmo.PpMoModel",{extend:"Hc_Common.view.BaseMultiPageModel",alias:"viewmodel.ppmo"});
Ext.define("Hc_pp.view.ppmohand.PpMoHand",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.ppmohand",controller:"PpMoHand",viewModel:{type:"PpMoHand"},initComponent:function(){var a=this;Ext.apply(a.searchPanel,{items:[{xtype:"combo",width:"250",editable:false,triggerAction:"all",fieldLabel:"所属项目编码",name:"projectCode",displayField:"projectName",valueField:"projectCode",store:{type:"itgproject",autoLoad:true}}]});Ext.apply(a.grid,{columns:[{dataIndex:"lineId",text:"行id(主键)",editor:{allowBlank:false}},{dataIndex:"handNo",text:"手编号(yyyyMMdd+6位流水号)",editor:{allowBlank:false}},{dataIndex:"boxNo",text:"箱号(yyyyMMdd+6位流水号)",editor:{allowBlank:false}},{dataIndex:"startDate",text:"开工日期",editor:{allowBlank:false}},{dataIndex:"workshopNo",text:"工作中心(从bas_workshop取)",editor:{allowBlank:false}},{dataIndex:"wrkactType",text:"工作中心类型(取数据字典 workshop_type)",editor:{allowBlank:false}},{dataIndex:"factoryNo",text:"厂区编号(前端不显示)",editor:{allowBlank:false}},{dataIndex:"divisionNo",text:"车间所在事业部编号(前端不显示)",editor:{allowBlank:false}},{dataIndex:"wrkactNo",text:"工分表编号",editor:{allowBlank:false}},{dataIndex:"materialNo",text:"半成品编码",editor:{allowBlank:false}},{dataIndex:"qtyTotal",text:"每手总数量",editor:{allowBlank:false}},{dataIndex:"scheduleNo",text:"排程号",editor:{allowBlank:false}},{dataIndex:"moNo",text:"MO号",editor:{allowBlank:false}},{dataIndex:"moDivisionNo",text:"MO所在事业部编号(前端不显示)",editor:{allowBlank:false}},{dataIndex:"sizeNo",text:"配码",editor:{allowBlank:false}},{dataIndex:"qtyMo",text:"MO配码工单数量",editor:{allowBlank:false}},{dataIndex:"qtyHand",text:"每个配码数量",editor:{allowBlank:false}},{dataIndex:"remarks",text:"备注",editor:{allowBlank:false}},],batchUrl:Hc.IntegPath+"rest/pp_mo_hand/listsave.json"});a.callParent()}});
Ext.define("Hc_pp.view.ppmohand.PpMoHandController",{extend:"Hc_Common.view.BaseMultiPageController",alias:"controller.ppmohand"});
Ext.define("Hc_pp.view.ppmohand.PpMoHand",{extend:"Hc_Common.view.BaseMultiPageModel",alias:"viewmodel.ppmohand"});
Ext.define("Hc_pp.view.ppworkshopstyle.PpWorkshopStyle",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.ppworkshopstyle",controller:"ppworkshopstyle",viewModel:{type:"ppworkshopstyle"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{fieldLabel:"事业部",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_division/listAll.json",displaymember:"divisionName",valuemember:"divisionNo",reference:"divisionNo",listeners:{select:"onDivOrFacSelect"}},{fieldLabel:"厂区",xtype:"extcombox",reference:"factoryNo",displayvalue:Hc.mdmPath+"bas_factory/listAll.json",displaymember:"factoryName",valuemember:"factoryNo",listeners:{select:"onDivOrFacSelect"}},{fieldLabel:"车间",name:"workshopNo",reference:"workshopNo",xtype:"extcombox",displayvalue:Hc.mdmPath+"bas_workshop/listAll.json",displaymember:"workshopName",valuemember:"workshopNo"},{xtype:"textfield",name:"materialNo",fieldLabel:"物料编号"},{xtype:"textfield",name:"materialNo",fieldLabel:"型体"},{xtype:"textfield",name:"materialNo",fieldLabel:"款号"}],gridColumns:[{dataIndex:"factoryNo",text:"厂区",editor:{allowBlank:false}},{dataIndex:"divisionNo",text:"事业部",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:Hc.mdmPath+"bas_division/listAll.json",displaymember:"divisionName",valuemember:"divisionNo"},{dataIndex:"materialNo",text:"产品编码",editor:{xtype:"searchhelpfield",name:"materialNo",reference:"materialNo",gridColumns:[{dataIndex:"materialNo",text:"物料编码",flex:0.3},{dataIndex:"materialCode",text:"物料编号",flex:0.3},{dataIndex:"materialName",text:"物料名称",flex:0.3}],searchItems:[{fieldLabel:"物料编码",name:"materialNo",flex:0.5}],isAutoLoad:false,url:Hc.mdmPath+"bas_material/list.json",allowBlank:false}},{dataIndex:"materialNo",text:"产品名称",editor:{allowBlank:false}},{dataIndex:"materialNo",text:"款号",editor:{allowBlank:false}},{dataIndex:"materialNo",text:"型体",editor:{allowBlank:false}},{dataIndex:"workshopNo",text:"车间",editor:{allowBlank:false}},{dataIndex:"groupNo",text:"面部小组",editor:{allowBlank:false}},{dataIndex:"materialNo",text:"里料",editor:{allowBlank:false}},{dataIndex:"materialNo",text:"男/女鞋",editor:{allowBlank:false}},{dataIndex:"materialNo",text:"工分",editor:{allowBlank:false}},{dataIndex:"enableFlag",text:"启用状态",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:"0=禁用:1=启用"},],gridPrimaryKey:"lineId",gridModel:"Hc_pp.model.PpWorkshopStyle",gridLoadUrl:Hc.ppsPath+"pp_workshop_style/list.json",gridSaveUrl:Hc.ppsPath+"pp_workshop_style/batchOperate.json",gridExportUrl:Hc.ppsPath+"pp_workshop_style/do_export.json",gridImportUrl:Hc.ppsPath+""});a.callParent()}});
Ext.define("Hc_pp.view.ppworkshopstyle.PpWorkshopStyleController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.ppworkshopstyle",onDivOrFacSelect:function(f,g){var d=this,b=d.getObjList(),c=b.commonsearch;var a=d.lookupReference("workshopNo");var e=c.items.getAt(0).getValue(),h=c.items.getAt(1).getValue();if(e!=null&&e!=""){a.store.proxy.extraParams.divisionNo=e}if(h!=null&&h!=""){a.store.proxy.extraParams.factoryNo=h}a.store.load()}});
Ext.define("Hc_pp.view.ppworkshopstyle.PpWorkshopStyleModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.ppworkshopstyle"});
